/*==============================================================================
** utils.S -- some assemble tool routines
**
** MODIFY HISTORY:
**
** 2011-08-15 wdf Create.
==============================================================================*/

.globl CPU_LOCK
CPU_LOCK:
    push {r1}
    MRS  r0, CPSR
    ORR  r1, r0, #0x80    /* mask I bit */
    MSR  CPSR_c, r1
    pop  {r1}
    bx   lr

.globl CPU_UNLOCK
CPU_UNLOCK:
    MSR  CPSR_c, r0;
    bx   lr

/*==============================================================================
** FILE END
==============================================================================*/

